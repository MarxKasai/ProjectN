<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>❤</title>
    <link rel="icon" type="image/png" href="img/CinnamorollIcon.png">
    <link rel="stylesheet" href="css/hideAnimation.css" type="text/css">

    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            padding: 0;
            background: #ccedff;
            color: white;
            font-family: 'Lexend Deca';
            font-size: 3em;
        }

        .container {
            position: relative;
            text-align: center;
        }

        

        h1 {
            font-size: 1em; /* Tamaño de la fuente */
            font-family: 'DS-Digital'; /* Fuente estilo reloj digital */
            color: white;
        }

        h2 {
            color: red;
            font-size: 2em
        }

        .date-container {
        position: absolute;
        top: 35%;
        left: 50%;
        transform: translate(-50%, -50%);
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
            position: relative;
            height: auto;
            animation: palpitar 1s infinite alternate; /* Pulsating animation */
        }

        @keyframes palpitar {
            from {
                transform: scale(1);
            }
            to {
                transform: scale(1.1);
            }
        }


        #blossom_container {
	background-color: #f1f1f1;
	position: absolute;
	width: calc(100% - 40px);
	height: calc(100% - 40px);
}

.petal {
	background: url(http://talktofill.surge.sh/cherry-blossom.png) no-repeat;
	
	&.petal-style1 {
		width: 45px;
		height: 20px;
		background-position: -31px 0;
	}
	&.petal-style2 {
		width: 42px;
		height: 22px;
		background-position: 0 -23px;
	}
	&.petal-style3 {
		width: 37px;
		height: 24px;
		background-position: 0 -50px;
	}
	&.petal-style4 {
		width: 26px;
		height: 34px;
		background-position: -49px -35px;
	}
}
    </style>
</head>
<body>
    <div id="blossom_container"></div>
    <div class="container">
        <img src="img/Heart.png" alt="Imagen de corazón">
        <div class="date-container">
            <h1 id="currentDate"></h1>
        </div>
        <div class="jumpy">1</div> mes!
    </div>

    <script>
        // Obtener la fecha actual
        let currentDate = new Date();
        
        // Formatear la fecha como "DD-MM-YYYY"
        let formattedDate = currentDate.getDate() + '-' + (currentDate.getMonth() + 1) + '-' + currentDate.getFullYear();
        
        // Insertar la fecha en el elemento con id "currentDate"
        document.getElementById('currentDate').innerText = formattedDate;

        

        class Petal {
  constructor(config) {
    this.el = document.createElement('div');
    this.customClass = config.customClass || '';
    this.x = config.x || 0;
    this.y = config.y || 0;
    this.z = config.z || 0;
    this.xSpeedVariation = config.xSpeedVariation || 0;
    this.ySpeed = config.ySpeed || 0;
    this.rotation = {
      axis: 'X',
      value: 0,
      speed: 0,
      x: 0
    };

    if (config.rotation && typeof config.rotation === 'object') {
      this.rotation.axis = config.rotation.axis || this.rotation.axis;
      this.rotation.value = config.rotation.value || this.rotation.value;
      this.rotation.speed = config.rotation.speed || this.rotation.speed;
      this.rotation.x = config.rotation.x || this.rotation.x;
    }

    this.el.className = 'petal  ' + this.customClass;
    this.el.style.position = 'absolute';
    this.el.style.backfaceVisibility = 'visible';
  }
}

class BlossomScene {
  constructor(config) {
    this.container = document.getElementById(config.id);
    if (this.container === null) {
      throw new Error('[id] provided was not found in document');
    }
    this.placeholder = document.createElement('div');
    this.petals = [];
    this.numPetals = config.numPetals || 5;
    this.petalsTypes = config.petalsTypes;
    this.gravity = config.gravity || 0.8;
    this.windMaxSpeed = config.windMaxSpeed || 4;
    this.windMagnitude = 0.2;
    this.windDuration = 0;
    this.width = this.container.offsetWidth;
    this.height = this.container.offsetHeight;
    this.timer = 0;

    this.container.style.overflow = 'hidden';
    this.placeholder.style.transformStyle = 'preserve-3d';
    this.placeholder.style.width = this.container.offsetWidth + 'px';
    this.placeholder.style.height = this.container.offsetHeight + 'px';
    this.container.appendChild(this.placeholder);
    this.createPetals();
    requestAnimationFrame(this.updateFrame.bind(this));
  }

  resetPetal(petal) {
    petal.x = this.width * 2 - Math.random() * this.width * 1.75;
    petal.y = petal.el.offsetHeight * -1;
    petal.z = Math.random() * 200;

    if (petal.x > this.width) {
      petal.x = this.width + petal.el.offsetWidth;
      petal.y = Math.random() * this.height / 2;
    }

    petal.rotation.speed = Math.random() * 10;
    let randomAxis = Math.random();
    if (randomAxis > 0.5) {
      petal.rotation.axis = 'X';
    } else if (randomAxis > 0.25) {
      petal.rotation.axis = 'Y';
      petal.rotation.x = Math.random() * 180 + 90;
    } else {
      petal.rotation.axis = 'Z';
      petal.rotation.x = Math.random() * 360 - 180;
      petal.rotation.speed = Math.random() * 3;
    }

    petal.xSpeedVariation = Math.random() * 0.8 - 0.4;
    petal.ySpeed = Math.random() + this.gravity;

    return petal;
  }

  calculateWindSpeed(t, y) {
    let a = this.windMagnitude / 2 * (this.height - 2 * y / 3) / this.height;
    return a * Math.sin(2 * Math.PI / this.windDuration * t + (3 * Math.PI / 2)) + a;
  }

  updatePetal(petal) {
    let petalWindSpeed = this.calculateWindSpeed(this.timer, petal.y);
    let xSpeed = petalWindSpeed + petal.xSpeedVariation;

    petal.x -= xSpeed;
    petal.y += petal.ySpeed;
    petal.rotation.value += petal.rotation.speed;

    let t = 'translateX( ' + petal.x + 'px ) translateY( ' + petal.y + 'px ) translateZ( ' + petal.z + 'px )  rotate' + petal.rotation.axis + '( ' + petal.rotation.value + 'deg )';
    if (petal.rotation.axis !== 'X') {
      t += ' rotateX(' + petal.rotation.x + 'deg)';
    }
    petal.el.style.transform = t;

    if (petal.x < -10 || petal.y > this.height + 10) {
      this.resetPetal(petal);
    }
  }

  updateWind() {
    this.windMagnitude = Math.random() * this.windMaxSpeed;
    this.windDuration = this.windMagnitude * 50 + (Math.random() * 20 - 10);
  }

  createPetals() {
    for (let i = 0; i < this.numPetals; i++) {
      let tmpPetalType = this.petalsTypes[Math.floor(Math.random() * (this.petalsTypes.length - 1))];
      let tmpPetal = new Petal({ customClass: tmpPetalType.customClass });

      this.resetPetal(tmpPetal);
      this.petals.push(tmpPetal);
      this.placeholder.appendChild(tmpPetal.el);
    }
  }

  updateFrame() {
    if (this.timer === this.windDuration) {
      this.updateWind();
      this.timer = 0;
    }

    let petalsLen = this.petals.length;
    for (let i = 0; i < petalsLen; i++) {
      this.updatePetal(this.petals[i]);
    }

    this.timer++;
    requestAnimationFrame(this.updateFrame.bind(this));
  }
}

const petalsTypes = [
  new Petal({ customClass: 'petal-style1' }),
  new Petal({ customClass: 'petal-style2' }),
  new Petal({ customClass: 'petal-style3' }),
  new Petal({ customClass: 'petal-style4' })
];

const myBlossomSceneConfig = {
  id: 'blossom_container',
  petalsTypes
};

const myBlossomScene = new BlossomScene(myBlossomSceneConfig);


        
    </script>
</body>
</html>